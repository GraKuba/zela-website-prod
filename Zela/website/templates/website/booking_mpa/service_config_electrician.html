{% extends "website/booking_mpa/base.html" %}
{% load static %}

{% block title %}Electrician Service Configuration - Zela{% endblock %}

{% block booking_content %}
<div class="min-h-screen bg-gradient-to-br from-secondary-100/5 to-primary-100/10">
    <!-- Progress Header -->
    {% include "website/booking_mpa/components/progress_header.html" with current_step=current_step service_flow=service_flow %}
    
    <div class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            <!-- Step Title -->
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-gray-900 mb-2">What Do You Need Fixed?</h1>
                <p class="text-gray-600">Tell us about your electrical issue</p>
            </div>

            <form method="POST" class="space-y-6">
                {% csrf_token %}
                
                <!-- Electrical Issue Selection -->
                <div class="bg-white rounded-xl shadow-lg p-8">
                    <h2 class="text-xl font-semibold text-gray-900 mb-6">Select Issue Type</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- Installation -->
                        <label class="relative border-2 border-gray-200 rounded-lg p-4 hover:border-primary-300 cursor-pointer transition group">
                            <input type="radio" name="issue_type" value="installation" class="absolute opacity-0" required>
                            <div class="flex items-start">
                                <div class="flex-shrink-0">
                                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center group-hover:bg-blue-200 transition">
                                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <div class="font-semibold text-gray-900">Installation</div>
                                    <div class="text-sm text-gray-500">New outlets, switches, fixtures</div>
                                </div>
                            </div>
                        </label>
                        
                        <!-- Repair -->
                        <label class="relative border-2 border-gray-200 rounded-lg p-4 hover:border-primary-300 cursor-pointer transition group">
                            <input type="radio" name="issue_type" value="repair" class="absolute opacity-0" required>
                            <div class="flex items-start">
                                <div class="flex-shrink-0">
                                    <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center group-hover:bg-orange-200 transition">
                                        <svg class="w-6 h-6 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <div class="font-semibold text-gray-900">Repair</div>
                                    <div class="text-sm text-gray-500">Fix existing electrical issues</div>
                                </div>
                            </div>
                        </label>
                        
                        <!-- Wiring -->
                        <label class="relative border-2 border-gray-200 rounded-lg p-4 hover:border-primary-300 cursor-pointer transition group">
                            <input type="radio" name="issue_type" value="wiring" class="absolute opacity-0" required>
                            <div class="flex items-start">
                                <div class="flex-shrink-0">
                                    <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center group-hover:bg-purple-200 transition">
                                        <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <div class="font-semibold text-gray-900">Wiring</div>
                                    <div class="text-sm text-gray-500">Electrical wiring issues</div>
                                </div>
                            </div>
                        </label>
                        
                        <!-- Circuit Breaker -->
                        <label class="relative border-2 border-gray-200 rounded-lg p-4 hover:border-primary-300 cursor-pointer transition group">
                            <input type="radio" name="issue_type" value="circuit_breaker" class="absolute opacity-0" required>
                            <div class="flex items-start">
                                <div class="flex-shrink-0">
                                    <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center group-hover:bg-red-200 transition">
                                        <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <div class="font-semibold text-gray-900">Circuit Breaker</div>
                                    <div class="text-sm text-gray-500">Panel or breaker issues</div>
                                </div>
                            </div>
                        </label>
                        
                        <!-- Lighting -->
                        <label class="relative border-2 border-gray-200 rounded-lg p-4 hover:border-primary-300 cursor-pointer transition group">
                            <input type="radio" name="issue_type" value="lighting" class="absolute opacity-0" required>
                            <div class="flex items-start">
                                <div class="flex-shrink-0">
                                    <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center group-hover:bg-yellow-200 transition">
                                        <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <div class="font-semibold text-gray-900">Lighting</div>
                                    <div class="text-sm text-gray-500">Light fixtures & bulbs</div>
                                </div>
                            </div>
                        </label>
                        
                        <!-- Other -->
                        <label class="relative border-2 border-gray-200 rounded-lg p-4 hover:border-primary-300 cursor-pointer transition group">
                            <input type="radio" name="issue_type" value="other" class="absolute opacity-0" required>
                            <div class="flex items-start">
                                <div class="flex-shrink-0">
                                    <div class="w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center group-hover:bg-gray-200 transition">
                                        <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <div class="font-semibold text-gray-900">Other</div>
                                    <div class="text-sm text-gray-500">Other electrical issues</div>
                                </div>
                            </div>
                        </label>
                    </div>
                </div>
                
                <!-- Problem Description -->
                <div class="bg-white rounded-xl shadow-lg p-8">
                    <h2 class="text-xl font-semibold text-gray-900 mb-4">Describe the Problem</h2>
                    
                    <div class="space-y-4">
                        <div>
                            <label for="description" class="block text-sm font-medium text-gray-700 mb-2">
                                Issue Description
                            </label>
                            <textarea 
                                id="description" 
                                name="description" 
                                rows="4"
                                required
                                placeholder="Please describe the electrical issue you're experiencing..."
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 resize-none"
                            ></textarea>
                        </div>
                        
                        <!-- Urgency -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">
                                How urgent is this?
                            </label>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                                <label class="relative border border-gray-200 rounded-lg p-3 hover:border-primary-300 cursor-pointer transition">
                                    <input type="radio" name="urgency" value="low" class="absolute opacity-0">
                                    <div class="text-center">
                                        <div class="font-medium text-gray-900">Low</div>
                                        <div class="text-xs text-gray-500">Can wait a few days</div>
                                    </div>
                                </label>
                                
                                <label class="relative border border-gray-200 rounded-lg p-3 hover:border-primary-300 cursor-pointer transition">
                                    <input type="radio" name="urgency" value="medium" class="absolute opacity-0" checked>
                                    <div class="text-center">
                                        <div class="font-medium text-gray-900">Medium</div>
                                        <div class="text-xs text-gray-500">Within 24-48 hours</div>
                                    </div>
                                </label>
                                
                                <label class="relative border border-gray-200 rounded-lg p-3 hover:border-primary-300 cursor-pointer transition">
                                    <input type="radio" name="urgency" value="high" class="absolute opacity-0">
                                    <div class="text-center">
                                        <div class="font-medium text-gray-900">High</div>
                                        <div class="text-xs text-gray-500">ASAP - Safety concern</div>
                                    </div>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Estimated Duration -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">
                                Estimated Work Duration
                            </label>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                                <label class="relative border border-gray-200 rounded-lg p-3 hover:border-primary-300 cursor-pointer transition">
                                    <input type="radio" name="duration_estimate" value="1" class="absolute opacity-0">
                                    <div class="text-center">
                                        <div class="font-medium text-gray-900">1 hour</div>
                                    </div>
                                </label>
                                
                                <label class="relative border border-gray-200 rounded-lg p-3 hover:border-primary-300 cursor-pointer transition">
                                    <input type="radio" name="duration_estimate" value="2" class="absolute opacity-0" checked>
                                    <div class="text-center">
                                        <div class="font-medium text-gray-900">2 hours</div>
                                    </div>
                                </label>
                                
                                <label class="relative border border-gray-200 rounded-lg p-3 hover:border-primary-300 cursor-pointer transition">
                                    <input type="radio" name="duration_estimate" value="4" class="absolute opacity-0">
                                    <div class="text-center">
                                        <div class="font-medium text-gray-900">4 hours</div>
                                    </div>
                                </label>
                                
                                <label class="relative border border-gray-200 rounded-lg p-3 hover:border-primary-300 cursor-pointer transition">
                                    <input type="radio" name="duration_estimate" value="8" class="absolute opacity-0">
                                    <div class="text-center">
                                        <div class="font-medium text-gray-900">Full day</div>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Safety Warning -->
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-6">
                        <div class="flex">
                            <svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                            </svg>
                            <div class="text-sm text-yellow-800">
                                <p class="font-medium">Safety First!</p>
                                <p>If you're experiencing sparks, burning smells, or other immediate dangers, please turn off your main breaker and contact emergency services.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Navigation Buttons -->
                <div class="flex justify-between">
                    <a href="{{ previous_url }}" class="inline-flex items-center px-6 py-3 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                        </svg>
                        Back
                    </a>
                    
                    <button type="submit" class="inline-flex items-center px-6 py-3 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 transition">
                        Continue
                        <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    // Handle radio button styling for issue types
    document.querySelectorAll('input[name="issue_type"]').forEach(radio => {
        radio.addEventListener('change', function() {
            document.querySelectorAll('input[name="issue_type"]').forEach(r => {
                r.closest('label').classList.remove('border-primary-500', 'bg-primary-50');
            });
            if (this.checked) {
                this.closest('label').classList.add('border-primary-500', 'bg-primary-50');
            }
        });
    });
    
    // Handle other radio buttons
    ['urgency', 'duration_estimate'].forEach(name => {
        document.querySelectorAll(`input[name="${name}"]`).forEach(radio => {
            radio.addEventListener('change', function() {
                document.querySelectorAll(`input[name="${name}"]`).forEach(r => {
                    r.closest('label').classList.remove('border-primary-500', 'bg-primary-50');
                });
                if (this.checked) {
                    this.closest('label').classList.add('border-primary-500', 'bg-primary-50');
                }
            });
        });
    });
    
    // Initialize selected state
    document.querySelector('input[name="urgency"][value="medium"]').dispatchEvent(new Event('change'));
    document.querySelector('input[name="duration_estimate"][value="2"]').dispatchEvent(new Event('change'));
</script>
{% endblock %}