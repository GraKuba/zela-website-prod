{% extends "website/booking_mpa/base.html" %}
{% load static %}

{% block title %}Pest Control Service Configuration - Zela{% endblock %}

{% block booking_content %}
<div class="min-h-screen bg-gradient-to-br from-secondary-100/5 to-primary-100/10">
    <!-- Progress Header -->
    {% include "website/booking_mpa/components/progress_header.html" with current_step=current_step service_flow=service_flow %}
    
    <div class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            <!-- Step Title -->
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-gray-900 mb-2">Pest Control Details</h1>
                <p class="text-gray-600">Tell us about your pest control needs</p>
            </div>

            <form method="POST" class="space-y-6">
                {% csrf_token %}
                
                <!-- Pest Type Selection -->
                <div class="bg-white rounded-xl shadow-lg p-8">
                    <h2 class="text-xl font-semibold text-gray-900 mb-6">What Type of Pest?</h2>
                    
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                        <label class="relative border-2 border-gray-200 rounded-lg p-4 hover:border-primary-300 cursor-pointer transition group">
                            <input type="radio" name="pest_type" value="cockroaches" class="absolute opacity-0" required>
                            <div class="text-center">
                                <div class="w-16 h-16 mx-auto bg-orange-100 rounded-full flex items-center justify-center group-hover:bg-orange-200 transition mb-2">
                                    <span class="text-2xl">ü™≥</span>
                                </div>
                                <div class="font-medium text-gray-900">Cockroaches</div>
                            </div>
                        </label>
                        
                        <label class="relative border-2 border-gray-200 rounded-lg p-4 hover:border-primary-300 cursor-pointer transition group">
                            <input type="radio" name="pest_type" value="ants" class="absolute opacity-0" required>
                            <div class="text-center">
                                <div class="w-16 h-16 mx-auto bg-red-100 rounded-full flex items-center justify-center group-hover:bg-red-200 transition mb-2">
                                    <span class="text-2xl">üêú</span>
                                </div>
                                <div class="font-medium text-gray-900">Ants</div>
                            </div>
                        </label>
                        
                        <label class="relative border-2 border-gray-200 rounded-lg p-4 hover:border-primary-300 cursor-pointer transition group">
                            <input type="radio" name="pest_type" value="rats" class="absolute opacity-0" required>
                            <div class="text-center">
                                <div class="w-16 h-16 mx-auto bg-gray-100 rounded-full flex items-center justify-center group-hover:bg-gray-200 transition mb-2">
                                    <span class="text-2xl">üêÄ</span>
                                </div>
                                <div class="font-medium text-gray-900">Rats/Mice</div>
                            </div>
                        </label>
                        
                        <label class="relative border-2 border-gray-200 rounded-lg p-4 hover:border-primary-300 cursor-pointer transition group">
                            <input type="radio" name="pest_type" value="termites" class="absolute opacity-0" required>
                            <div class="text-center">
                                <div class="w-16 h-16 mx-auto bg-yellow-100 rounded-full flex items-center justify-center group-hover:bg-yellow-200 transition mb-2">
                                    <span class="text-2xl">üêõ</span>
                                </div>
                                <div class="font-medium text-gray-900">Termites</div>
                            </div>
                        </label>
                        
                        <label class="relative border-2 border-gray-200 rounded-lg p-4 hover:border-primary-300 cursor-pointer transition group">
                            <input type="radio" name="pest_type" value="bedbugs" class="absolute opacity-0" required>
                            <div class="text-center">
                                <div class="w-16 h-16 mx-auto bg-purple-100 rounded-full flex items-center justify-center group-hover:bg-purple-200 transition mb-2">
                                    <span class="text-2xl">ü¶ü</span>
                                </div>
                                <div class="font-medium text-gray-900">Bedbugs</div>
                            </div>
                        </label>
                        
                        <label class="relative border-2 border-gray-200 rounded-lg p-4 hover:border-primary-300 cursor-pointer transition group">
                            <input type="radio" name="pest_type" value="other" class="absolute opacity-0" required>
                            <div class="text-center">
                                <div class="w-16 h-16 mx-auto bg-blue-100 rounded-full flex items-center justify-center group-hover:bg-blue-200 transition mb-2">
                                    <span class="text-2xl">üï∑Ô∏è</span>
                                </div>
                                <div class="font-medium text-gray-900">Other</div>
                            </div>
                        </label>
                    </div>
                </div>
                
                <!-- Treatment Options -->
                <div class="bg-white rounded-xl shadow-lg p-8">
                    <h2 class="text-xl font-semibold text-gray-900 mb-6">Treatment Type</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <label class="relative border-2 border-gray-200 rounded-lg p-4 hover:border-primary-300 cursor-pointer transition">
                            <input type="radio" name="treatment_type" value="prevention" class="absolute opacity-0" required>
                            <div class="flex items-start">
                                <div class="flex-shrink-0">
                                    <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="ml-3">
                                    <div class="font-medium text-gray-900">Prevention</div>
                                    <div class="text-sm text-gray-500">Preventive treatment to avoid infestations</div>
                                    <div class="text-xs text-primary-600 mt-1 font-medium">Recommended quarterly</div>
                                </div>
                            </div>
                        </label>
                        
                        <label class="relative border-2 border-gray-200 rounded-lg p-4 hover:border-primary-300 cursor-pointer transition">
                            <input type="radio" name="treatment_type" value="elimination" class="absolute opacity-0" required>
                            <div class="flex items-start">
                                <div class="flex-shrink-0">
                                    <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center">
                                        <svg class="w-5 h-5 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="ml-3">
                                    <div class="font-medium text-gray-900">Elimination</div>
                                    <div class="text-sm text-gray-500">Remove existing pest infestation</div>
                                    <div class="text-xs text-orange-600 mt-1 font-medium">Immediate treatment needed</div>
                                </div>
                            </div>
                        </label>
                    </div>
                    
                    <!-- Infestation Level (for elimination) -->
                    <div class="mt-6 border-t pt-6" id="infestation-level" style="display: none;">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Infestation Level</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                            <label class="relative border border-gray-200 rounded-lg p-3 hover:border-primary-300 cursor-pointer transition">
                                <input type="radio" name="infestation_level" value="low" class="absolute opacity-0">
                                <div class="text-center">
                                    <div class="w-8 h-2 bg-yellow-400 rounded mx-auto mb-2"></div>
                                    <div class="font-medium text-gray-900">Low</div>
                                    <div class="text-xs text-gray-500">Few sightings</div>
                                </div>
                            </label>
                            
                            <label class="relative border border-gray-200 rounded-lg p-3 hover:border-primary-300 cursor-pointer transition">
                                <input type="radio" name="infestation_level" value="medium" class="absolute opacity-0">
                                <div class="text-center">
                                    <div class="w-8 h-2 bg-orange-400 rounded mx-auto mb-2"></div>
                                    <div class="font-medium text-gray-900">Medium</div>
                                    <div class="text-xs text-gray-500">Regular sightings</div>
                                </div>
                            </label>
                            
                            <label class="relative border border-gray-200 rounded-lg p-3 hover:border-primary-300 cursor-pointer transition">
                                <input type="radio" name="infestation_level" value="high" class="absolute opacity-0">
                                <div class="text-center">
                                    <div class="w-8 h-2 bg-red-500 rounded mx-auto mb-2"></div>
                                    <div class="font-medium text-gray-900">High</div>
                                    <div class="text-xs text-gray-500">Severe infestation</div>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Affected Areas -->
                <div class="bg-white rounded-xl shadow-lg p-8">
                    <h2 class="text-xl font-semibold text-gray-900 mb-6">Affected Areas</h2>
                    
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                        <label class="flex items-center cursor-pointer p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <input type="checkbox" name="affected_areas" value="kitchen" class="mr-3">
                            <span class="text-gray-700">Kitchen</span>
                        </label>
                        
                        <label class="flex items-center cursor-pointer p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <input type="checkbox" name="affected_areas" value="bathrooms" class="mr-3">
                            <span class="text-gray-700">Bathrooms</span>
                        </label>
                        
                        <label class="flex items-center cursor-pointer p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <input type="checkbox" name="affected_areas" value="bedrooms" class="mr-3">
                            <span class="text-gray-700">Bedrooms</span>
                        </label>
                        
                        <label class="flex items-center cursor-pointer p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <input type="checkbox" name="affected_areas" value="living_room" class="mr-3">
                            <span class="text-gray-700">Living Room</span>
                        </label>
                        
                        <label class="flex items-center cursor-pointer p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <input type="checkbox" name="affected_areas" value="garden" class="mr-3">
                            <span class="text-gray-700">Garden/Outdoor</span>
                        </label>
                        
                        <label class="flex items-center cursor-pointer p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <input type="checkbox" name="affected_areas" value="entire_property" class="mr-3">
                            <span class="text-gray-700">Entire Property</span>
                        </label>
                    </div>
                    
                    <!-- Special Considerations -->
                    <div class="mt-6 border-t pt-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Special Considerations</h3>
                        <div class="space-y-3">
                            <label class="flex items-center cursor-pointer">
                                <input type="checkbox" name="considerations" value="pets" class="mr-3">
                                <span class="text-gray-700">I have pets (pet-safe treatment required)</span>
                            </label>
                            
                            <label class="flex items-center cursor-pointer">
                                <input type="checkbox" name="considerations" value="children" class="mr-3">
                                <span class="text-gray-700">Children in the home</span>
                            </label>
                            
                            <label class="flex items-center cursor-pointer">
                                <input type="checkbox" name="considerations" value="eco_friendly" class="mr-3">
                                <span class="text-gray-700">Prefer eco-friendly products</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Additional Information -->
                    <div class="mt-6">
                        <label for="additional_info" class="block text-sm font-medium text-gray-700 mb-2">
                            Additional Information <span class="text-gray-400">(Optional)</span>
                        </label>
                        <textarea 
                            id="additional_info" 
                            name="additional_info" 
                            rows="3"
                            placeholder="Any additional details about the pest problem..."
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 resize-none"
                        ></textarea>
                    </div>
                    
                    <!-- Service Warning -->
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-6">
                        <div class="flex">
                            <svg class="w-5 h-5 text-yellow-600 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                            </svg>
                            <div class="text-sm text-yellow-800">
                                <p class="font-medium">Important:</p>
                                <ul class="list-disc list-inside mt-1 space-y-1 text-xs">
                                    <li>Treatment may require multiple visits</li>
                                    <li>Some areas may need to be vacated during treatment</li>
                                    <li>Follow-up inspection included</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Navigation Buttons -->
                <div class="flex justify-between">
                    <a href="{{ previous_url }}" class="inline-flex items-center px-6 py-3 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                        </svg>
                        Back
                    </a>
                    
                    <button type="submit" class="inline-flex items-center px-6 py-3 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 transition">
                        Continue
                        <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    // Handle pest type selection
    document.querySelectorAll('input[name="pest_type"]').forEach(radio => {
        radio.addEventListener('change', function() {
            document.querySelectorAll('input[name="pest_type"]').forEach(r => {
                r.closest('label').classList.remove('border-primary-500', 'bg-primary-50');
            });
            if (this.checked) {
                this.closest('label').classList.add('border-primary-500', 'bg-primary-50');
            }
        });
    });
    
    // Handle treatment type selection
    document.querySelectorAll('input[name="treatment_type"]').forEach(radio => {
        radio.addEventListener('change', function() {
            document.querySelectorAll('input[name="treatment_type"]').forEach(r => {
                r.closest('label').classList.remove('border-primary-500', 'bg-primary-50');
            });
            if (this.checked) {
                this.closest('label').classList.add('border-primary-500', 'bg-primary-50');
                
                // Show/hide infestation level based on treatment type
                if (this.value === 'elimination') {
                    document.getElementById('infestation-level').style.display = 'block';
                } else {
                    document.getElementById('infestation-level').style.display = 'none';
                }
            }
        });
    });
    
    // Handle infestation level selection
    document.querySelectorAll('input[name="infestation_level"]').forEach(radio => {
        radio.addEventListener('change', function() {
            document.querySelectorAll('input[name="infestation_level"]').forEach(r => {
                r.closest('label').classList.remove('border-primary-500', 'bg-primary-50');
            });
            if (this.checked) {
                this.closest('label').classList.add('border-primary-500', 'bg-primary-50');
            }
        });
    });
</script>
{% endblock %}