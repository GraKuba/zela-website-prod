{% load static %}

<!-- Screen 9: Worker Selection for Dog Trainer -->
<div class="min-h-screen bg-white flex flex-col">
  <!-- Progress Header -->
  {% include "website/components/booking-flow/partials/booking-progress-header.html" %}

  <!-- Main Content -->
  <div class="flex-1 max-w-5xl mx-auto w-full px-6 py-8">
    <h2 class="text-3xl font-bold mb-2" style="color: #011e41">
      Escolha o seu treinador de cães
    </h2>
    <p class="text-gray-600 mb-8">
      Selecione um treinador disponível ou deixe-nos escolher o melhor para você
    </p>

    <!-- Selected Package Summary -->
    <div class="bg-gradient-to-r from-[#f4d35e]/10 to-[#f4d35e]/5 border border-[#f4d35e]/30 rounded-2xl p-6 mb-8">
      <div class="flex items-center justify-between">
        <div>
          <h3 class="font-bold text-lg mb-1" style="color: #011e41">
            <span x-text="getDogTrainerPackageName(booking.dogTrainerPackage)"></span>
          </h3>
          <p class="text-sm text-gray-600">
            <span x-text="getDogTrainerPackageDetails(booking.dogTrainerPackage).sessions"></span> sessões • 
            <span x-text="getDogTrainerPackageDetails(booking.dogTrainerPackage).frequency"></span>
          </p>
        </div>
        <div class="text-right">
          <div class="text-2xl font-bold" style="color: #015e73">
            <span x-text="formatCurrency(getDogTrainerPackageDetails(booking.dogTrainerPackage).price)"></span>
          </div>
          <div class="text-xs text-gray-500">
            <span x-text="formatCurrency(getDogTrainerPackageDetails(booking.dogTrainerPackage).perSession)"></span>/sessão
          </div>
        </div>
      </div>
    </div>

    <!-- Worker Selection Options -->
    <div class="space-y-6">
      <!-- Let Zela Choose Option -->
      <div
        @click="selectWorkerOption('matchmaking')"
        class="relative bg-white border-2 rounded-2xl p-6 cursor-pointer transition-all duration-200 transform hover:scale-[1.005]"
        :class="{ 'bg-gradient-to-br from-[#015e73]/5 to-[#015e73]/10 border-[#015e73] ring-2 ring-[#015e73]/30': booking.workerSelectionOption === 'matchmaking', 'border-gray-300 hover:border-gray-600': booking.workerSelectionOption !== 'matchmaking' }"
      >
        <div class="flex items-start justify-between">
          <div class="flex-1">
            <div class="flex items-center mb-3">
              <div class="w-12 h-12 bg-gradient-to-br from-[#015e73] to-[#017891] rounded-full flex items-center justify-center text-white mr-4">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
              </div>
              <div>
                <h3 class="text-lg font-bold" style="color: #011e41">
                  Deixe a Zela escolher o melhor treinador
                </h3>
                <div class="flex items-center mt-1">
                  <span class="bg-green-100 text-green-700 text-xs font-semibold px-2 py-1 rounded">Recomendado</span>
                </div>
              </div>
            </div>
            <p class="text-sm text-gray-600 ml-16">
              Vamos encontrar o treinador ideal com base nas necessidades do seu cão e na sua localização. Todos os nossos treinadores são certificados e experientes.
            </p>
            <ul class="mt-4 ml-16 space-y-2 text-sm text-gray-600">
              <li class="flex items-center">
                <svg class="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
                Correspondência baseada na especialização
              </li>
              <li class="flex items-center">
                <svg class="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
                Avaliações verificadas de clientes
              </li>
              <li class="flex items-center">
                <svg class="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
                Confirmação em 24 horas
              </li>
            </ul>
          </div>
          <div
            class="w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all duration-200"
            :class="booking.workerSelectionOption === 'matchmaking' ? 'bg-[#015e73] border-[#015e73]' : 'border-gray-300 bg-white'"
          >
            <svg
              x-show="booking.workerSelectionOption === 'matchmaking'"
              x-transition
              class="w-4 h-4 text-white"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
            </svg>
          </div>
        </div>
      </div>

      <!-- Choose Specific Worker Option -->
      <div
        @click="selectWorkerOption('specific')"
        class="relative bg-white border-2 rounded-2xl p-6 cursor-pointer transition-all duration-200 transform hover:scale-[1.005]"
        :class="{ 'bg-gradient-to-br from-[#015e73]/5 to-[#015e73]/10 border-[#015e73] ring-2 ring-[#015e73]/30': booking.workerSelectionOption === 'specific', 'border-gray-300 hover:border-gray-600': booking.workerSelectionOption !== 'specific' }"
      >
        <div class="flex items-start justify-between">
          <div class="flex-1">
            <div class="flex items-center mb-3">
              <div class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 mr-4">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
              </div>
              <div>
                <h3 class="text-lg font-bold" style="color: #011e41">
                  Escolher um treinador específico
                </h3>
              </div>
            </div>
            <p class="text-sm text-gray-600 ml-16">
              Navegue pelos perfis dos nossos treinadores e escolha aquele que melhor se adequa às suas preferências.
            </p>
          </div>
          <div
            class="w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all duration-200"
            :class="booking.workerSelectionOption === 'specific' ? 'bg-[#015e73] border-[#015e73]' : 'border-gray-300 bg-white'"
          >
            <svg
              x-show="booking.workerSelectionOption === 'specific'"
              x-transition
              class="w-4 h-4 text-white"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
            </svg>
          </div>
        </div>
      </div>

      <!-- Available Workers (shown when specific is selected) -->
      <div
        x-show="booking.workerSelectionOption === 'specific'"
        x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0 transform translate-y-4"
        x-transition:enter-end="opacity-100 transform translate-y-0"
        class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6"
      >
        <!-- Worker Card 1 -->
        <div
          @click="selectSpecificWorker('trainer1')"
          class="bg-white border rounded-xl p-4 cursor-pointer transition-all duration-200 hover:shadow-lg"
          :class="{ 'border-[#015e73] ring-2 ring-[#015e73]/30': booking.selectedWorker === 'trainer1', 'border-gray-200': booking.selectedWorker !== 'trainer1' }"
        >
          <div class="flex items-start">
            <img src="{% static 'trainer1.jpg' %}" alt="João Silva" class="w-16 h-16 rounded-full object-cover mr-4" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22%3E%3Crect fill=%22%23e5e7eb%22 width=%22100%22 height=%22100%22/%3E%3Ctext x=%2250%22 y=%2250%22 text-anchor=%22middle%22 dy=%22.3em%22 fill=%22%239ca3af%22 font-family=%22sans-serif%22 font-size=%2240%22%3EJS%3C/text%3E%3C/svg%3E'">
            <div class="flex-1">
              <h4 class="font-bold text-lg" style="color: #011e41">João Silva</h4>
              <div class="flex items-center mt-1">
                <div class="flex text-yellow-400">
                  <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                  <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                  <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                  <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                  <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                </div>
                <span class="ml-2 text-sm text-gray-600">4.9 (87 avaliações)</span>
              </div>
              <p class="text-sm text-gray-600 mt-2">Especialista em comportamento e obediência básica</p>
              <p class="text-xs text-gray-500 mt-1">5 anos de experiência • Certificado CBCC-KA</p>
            </div>
          </div>
        </div>

        <!-- Worker Card 2 -->
        <div
          @click="selectSpecificWorker('trainer2')"
          class="bg-white border rounded-xl p-4 cursor-pointer transition-all duration-200 hover:shadow-lg"
          :class="{ 'border-[#015e73] ring-2 ring-[#015e73]/30': booking.selectedWorker === 'trainer2', 'border-gray-200': booking.selectedWorker !== 'trainer2' }"
        >
          <div class="flex items-start">
            <img src="{% static 'trainer2.jpg' %}" alt="Maria Santos" class="w-16 h-16 rounded-full object-cover mr-4" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22%3E%3Crect fill=%22%23e5e7eb%22 width=%22100%22 height=%22100%22/%3E%3Ctext x=%2250%22 y=%2250%22 text-anchor=%22middle%22 dy=%22.3em%22 fill=%22%239ca3af%22 font-family=%22sans-serif%22 font-size=%2240%22%3EMS%3C/text%3E%3C/svg%3E'">
            <div class="flex-1">
              <h4 class="font-bold text-lg" style="color: #011e41">Maria Santos</h4>
              <div class="flex items-center mt-1">
                <div class="flex text-yellow-400">
                  <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                  <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                  <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                  <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                  <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                </div>
                <span class="ml-2 text-sm text-gray-600">5.0 (63 avaliações)</span>
              </div>
              <p class="text-sm text-gray-600 mt-2">Especialista em filhotes e socialização</p>
              <p class="text-xs text-gray-500 mt-1">8 anos de experiência • Certificado CPDT-KA</p>
            </div>
          </div>
        </div>

        <!-- Worker Card 3 -->
        <div
          @click="selectSpecificWorker('trainer3')"
          class="bg-white border rounded-xl p-4 cursor-pointer transition-all duration-200 hover:shadow-lg"
          :class="{ 'border-[#015e73] ring-2 ring-[#015e73]/30': booking.selectedWorker === 'trainer3', 'border-gray-200': booking.selectedWorker !== 'trainer3' }"
        >
          <div class="flex items-start">
            <img src="{% static 'trainer3.jpg' %}" alt="Pedro Costa" class="w-16 h-16 rounded-full object-cover mr-4" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22%3E%3Crect fill=%22%23e5e7eb%22 width=%22100%22 height=%22100%22/%3E%3Ctext x=%2250%22 y=%2250%22 text-anchor=%22middle%22 dy=%22.3em%22 fill=%22%239ca3af%22 font-family=%22sans-serif%22 font-size=%2240%22%3EPC%3C/text%3E%3C/svg%3E'">
            <div class="flex-1">
              <h4 class="font-bold text-lg" style="color: #011e41">Pedro Costa</h4>
              <div class="flex items-center mt-1">
                <div class="flex text-yellow-400">
                  <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                  <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                  <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                  <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                </div>
                <span class="ml-2 text-sm text-gray-600">4.7 (45 avaliações)</span>
              </div>
              <p class="text-sm text-gray-600 mt-2">Treino de agilidade e esportes caninos</p>
              <p class="text-xs text-gray-500 mt-1">3 anos de experiência • Certificado KPA-CTP</p>
            </div>
          </div>
        </div>

        <!-- Worker Card 4 -->
        <div
          @click="selectSpecificWorker('trainer4')"
          class="bg-white border rounded-xl p-4 cursor-pointer transition-all duration-200 hover:shadow-lg"
          :class="{ 'border-[#015e73] ring-2 ring-[#015e73]/30': booking.selectedWorker === 'trainer4', 'border-gray-200': booking.selectedWorker !== 'trainer4' }"
        >
          <div class="flex items-start">
            <img src="{% static 'trainer4.jpg' %}" alt="Ana Oliveira" class="w-16 h-16 rounded-full object-cover mr-4" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22%3E%3Crect fill=%22%23e5e7eb%22 width=%22100%22 height=%22100%22/%3E%3Ctext x=%2250%22 y=%2250%22 text-anchor=%22middle%22 dy=%22.3em%22 fill=%22%239ca3af%22 font-family=%22sans-serif%22 font-size=%2240%22%3EAO%3C/text%3E%3C/svg%3E'">
            <div class="flex-1">
              <h4 class="font-bold text-lg" style="color: #011e41">Ana Oliveira</h4>
              <div class="flex items-center mt-1">
                <div class="flex text-yellow-400">
                  <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                  <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                  <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                  <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                  <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                </div>
                <span class="ml-2 text-sm text-gray-600">4.8 (92 avaliações)</span>
              </div>
              <p class="text-sm text-gray-600 mt-2">Modificação comportamental e ansiedade</p>
              <p class="text-xs text-gray-500 mt-1">6 anos de experiência • Certificado IAABC-CDT</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Action Section -->
    <div class="mt-8">
      <!-- Continue Button -->
      <div
        x-show="booking.workerSelectionOption && (booking.workerSelectionOption === 'matchmaking' || booking.selectedWorker)"
        x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0 transform translate-y-4"
        x-transition:enter-end="opacity-100 transform translate-y-0"
      >
        <button
          @click="proceedFromWorkerSelection()"
          class="w-full py-4 px-6 bg-gradient-to-r from-[#015e73] to-[#017891] text-white font-bold text-lg rounded-2xl hover:from-[#014a5a] hover:to-[#015e73] transition-all duration-300 shadow-lg transform hover:scale-[1.01] flex items-center justify-center group"
        >
          <span x-text="booking.workerSelectionOption === 'matchmaking' ? 'Continuar com Matchmaking' : 'Continuar com Treinador Selecionado'"></span>
          <svg
            class="w-5 h-5 ml-2 transform group-hover:translate-x-1 transition-transform"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
          </svg>
        </button>
      </div>

      <!-- Helper text when nothing selected -->
      <div
        x-show="!booking.workerSelectionOption || (booking.workerSelectionOption === 'specific' && !booking.selectedWorker)"
        class="text-center py-5 px-8 bg-gray-50 rounded-2xl border-2 border-dashed border-gray-300"
      >
        <svg class="w-12 h-12 mx-auto text-gray-400 mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
        </svg>
        <p class="text-gray-600 font-medium">
          <span x-show="!booking.workerSelectionOption">Selecione uma opção para continuar</span>
          <span x-show="booking.workerSelectionOption === 'specific' && !booking.selectedWorker">Escolha um treinador para continuar</span>
        </p>
      </div>
    </div>

    <!-- Back Button -->
    <div class="mt-6 text-center">
      <button
        @click="goToScreen(6)"
        class="inline-flex items-center text-gray-600 hover:text-[#015e73] font-medium transition-colors duration-200 group"
      >
        <svg class="w-5 h-5 mr-2 transform group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
        <span>Voltar para seleção de pacote</span>
      </button>
    </div>
  </div>
</div>