{% load static %}

<!-- Screen 6: Dog Trainer Package Selection -->
<div class="min-h-screen bg-white flex flex-col">
  <!-- Sticky Header with Progress -->
  <div class="sticky top-0 z-50 bg-white border-b border-gray-200 p-6">
    <div class="flex items-center justify-between">
      <div class="flex items-center">
        <img src="{% static 'zela-logo.png' %}" alt="Zela" class="w-10 h-10" />
        <span class="ml-3 text-xl font-bold" style="color: #011e41">Zela</span>
      </div>

      <!-- Progress Bar -->
      <div class="flex-1 max-w-md mx-auto">
        <div class="flex items-start justify-between mb-4">
          <div class="flex items-center">
            <div
              class="w-8 h-8 bg-[#015e73] text-white rounded-full flex items-center justify-center text-sm font-bold"
            >
              1
            </div>
            <div class="ml-2 text-sm font-medium" style="color: #011e41">
              Pacote
            </div>
          </div>
          <div class="flex items-center">
            <div
              class="w-8 h-8 bg-gray-200 text-gray-600 rounded-full flex items-center justify-center text-sm font-bold"
            >
              2
            </div>
            <div class="ml-2 text-sm text-gray-600">Trabalhador</div>
          </div>
          <div class="flex items-center">
            <div
              class="w-8 h-8 bg-gray-200 text-gray-600 rounded-full flex items-center justify-center text-sm font-bold"
            >
              3
            </div>
            <div class="ml-2 text-sm text-gray-600">Agenda</div>
          </div>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-2">
          <div
            class="bg-[#015e73] h-2 rounded-full"
            style="width: 20%"
          ></div>
        </div>
      </div>

      <div class="flex items-center space-x-4">
        <div
          @click="window.location.href = '/dashboard/'"
          class="w-10 h-10 bg-[#015e73] rounded-full flex items-center justify-center text-white font-bold cursor-pointer hover:bg-[#014a5a] transition-colors"
        >
          JG
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="flex-1 max-w-5xl mx-auto w-full px-6 py-8">
    <h2 class="text-3xl font-bold mb-2" style="color: #011e41">
      Escolha o pacote de treino ideal para o seu cão
    </h2>
    <p class="text-gray-600 mb-8">
      Todos os pacotes incluem avaliação inicial e plano personalizado.
    </p>

    <!-- Package Options -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
      <!-- Basic Package -->
      <div
        @click="selectDogTrainerPackage('basic')"
        class="bg-white border-2 rounded-2xl p-6 cursor-pointer hover:border-[#015e73] transition-all duration-200 relative"
        :class="{ 'bg-[#015e73]/10 border-[#015e73]': booking.dogTrainerPackage === 'basic' }"
      >
        <div class="absolute top-4 right-4">
          <div
            class="w-6 h-6 rounded-full border-2 flex items-center justify-center"
            :class="booking.dogTrainerPackage === 'basic' ? 'bg-[#015e73] border-[#015e73]' : 'border-gray-300'"
          >
            <svg
              x-show="booking.dogTrainerPackage === 'basic'"
              class="w-3 h-3 text-white"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="3"
                d="M5 13l4 4L19 7"
              />
            </svg>
          </div>
        </div>
        
        <div class="text-center mb-4">
          <h3 class="text-xl font-bold mb-2" style="color: #011e41">Pacote Básico</h3>
          <div class="text-3xl font-bold" style="color: #015e73">
            4 sessões
          </div>
          <div class="text-sm text-gray-600 mt-1">1 sessão por semana</div>
        </div>
        
        <ul class="space-y-2 text-sm text-gray-600 mb-6">
          <li class="flex items-start">
            <svg class="w-4 h-4 text-green-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            Comandos básicos
          </li>
          <li class="flex items-start">
            <svg class="w-4 h-4 text-green-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            Socialização
          </li>
          <li class="flex items-start">
            <svg class="w-4 h-4 text-green-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            Comportamento em casa
          </li>
          <li class="flex items-start">
            <svg class="w-4 h-4 text-green-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            Sessões de 45 minutos
          </li>
        </ul>
        
        <div class="pt-4 border-t border-gray-200">
          <div class="text-2xl font-bold text-center" style="color: #015e73">
            <span x-text="formatCurrency(32000)"></span>
          </div>
          <div class="text-xs text-gray-500 text-center mt-1">
            <span x-text="formatCurrency(8000)"></span> por sessão
          </div>
        </div>
      </div>

      <!-- Standard Package -->
      <div
        @click="selectDogTrainerPackage('standard')"
        class="bg-white border-2 rounded-2xl p-6 cursor-pointer hover:border-[#015e73] transition-all duration-200 relative"
        :class="{ 'bg-[#015e73]/10 border-[#015e73]': booking.dogTrainerPackage === 'standard' }"
      >
        <!-- Popular Badge -->
        <div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
          <span class="bg-orange-500 text-white text-xs font-bold px-3 py-1 rounded-full">
            MAIS POPULAR
          </span>
        </div>
        
        <div class="absolute top-4 right-4">
          <div
            class="w-6 h-6 rounded-full border-2 flex items-center justify-center"
            :class="booking.dogTrainerPackage === 'standard' ? 'bg-[#015e73] border-[#015e73]' : 'border-gray-300'"
          >
            <svg
              x-show="booking.dogTrainerPackage === 'standard'"
              class="w-3 h-3 text-white"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="3"
                d="M5 13l4 4L19 7"
              />
            </svg>
          </div>
        </div>
        
        <div class="text-center mb-4">
          <h3 class="text-xl font-bold mb-2" style="color: #011e41">Pacote Padrão</h3>
          <div class="text-3xl font-bold" style="color: #015e73">
            8 sessões
          </div>
          <div class="text-sm text-gray-600 mt-1">2 sessões por semana</div>
        </div>
        
        <ul class="space-y-2 text-sm text-gray-600 mb-6">
          <li class="flex items-start">
            <svg class="w-4 h-4 text-green-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            Tudo do Básico
          </li>
          <li class="flex items-start">
            <svg class="w-4 h-4 text-green-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            Comandos avançados
          </li>
          <li class="flex items-start">
            <svg class="w-4 h-4 text-green-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            Passeios com treino
          </li>
          <li class="flex items-start">
            <svg class="w-4 h-4 text-green-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            Sessões de 1 hora
          </li>
          <li class="flex items-start">
            <svg class="w-4 h-4 text-green-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            Suporte via WhatsApp
          </li>
        </ul>
        
        <div class="pt-4 border-t border-gray-200">
          <div class="flex items-center justify-center mb-1">
            <span class="text-sm text-gray-500 line-through mr-2">AKZ 72,000</span>
            <span class="bg-green-100 text-green-600 text-xs font-bold px-2 py-1 rounded">15% OFF</span>
          </div>
          <div class="text-2xl font-bold text-center" style="color: #015e73">
            <span x-text="formatCurrency(61200)"></span>
          </div>
          <div class="text-xs text-gray-500 text-center mt-1">
            <span x-text="formatCurrency(7650)"></span> por sessão
          </div>
        </div>
      </div>

      <!-- Premium Package -->
      <div
        @click="selectDogTrainerPackage('premium')"
        class="bg-white border-2 rounded-2xl p-6 cursor-pointer hover:border-[#015e73] transition-all duration-200 relative"
        :class="{ 'bg-[#015e73]/10 border-[#015e73]': booking.dogTrainerPackage === 'premium' }"
      >
        <div class="absolute top-4 right-4">
          <div
            class="w-6 h-6 rounded-full border-2 flex items-center justify-center"
            :class="booking.dogTrainerPackage === 'premium' ? 'bg-[#015e73] border-[#015e73]' : 'border-gray-300'"
          >
            <svg
              x-show="booking.dogTrainerPackage === 'premium'"
              class="w-3 h-3 text-white"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="3"
                d="M5 13l4 4L19 7"
              />
            </svg>
          </div>
        </div>
        
        <div class="text-center mb-4">
          <h3 class="text-xl font-bold mb-2" style="color: #011e41">Pacote Premium</h3>
          <div class="text-3xl font-bold" style="color: #015e73">
            12 sessões
          </div>
          <div class="text-sm text-gray-600 mt-1">3 sessões por semana</div>
        </div>
        
        <ul class="space-y-2 text-sm text-gray-600 mb-6">
          <li class="flex items-start">
            <svg class="w-4 h-4 text-green-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            Tudo do Padrão
          </li>
          <li class="flex items-start">
            <svg class="w-4 h-4 text-green-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            Treino comportamental
          </li>
          <li class="flex items-start">
            <svg class="w-4 h-4 text-green-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            Sessões em casa
          </li>
          <li class="flex items-start">
            <svg class="w-4 h-4 text-green-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            Sessões de 1.5 horas
          </li>
          <li class="flex items-start">
            <svg class="w-4 h-4 text-green-500 mt-0.5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            Relatório de progresso
          </li>
        </ul>
        
        <div class="pt-4 border-t border-gray-200">
          <div class="flex items-center justify-center mb-1">
            <span class="text-sm text-gray-500 line-through mr-2">AKZ 120,000</span>
            <span class="bg-green-100 text-green-600 text-xs font-bold px-2 py-1 rounded">25% OFF</span>
          </div>
          <div class="text-2xl font-bold text-center" style="color: #015e73">
            <span x-text="formatCurrency(90000)"></span>
          </div>
          <div class="text-xs text-gray-500 text-center mt-1">
            <span x-text="formatCurrency(7500)"></span> por sessão
          </div>
        </div>
      </div>
    </div>

    <!-- Existing Credits Alert -->
    <div x-show="userPackages && userPackages.length > 0" class="bg-blue-50 border border-blue-200 rounded-2xl p-6 mb-8">
      <h3 class="font-bold mb-3" style="color: #011e41">🎉 Você tem créditos disponíveis!</h3>
      <template x-for="package in userPackages" :key="package.id">
        <div class="flex justify-between items-center py-2">
          <span class="text-gray-700" x-text="package.name"></span>
          <span class="font-medium" style="color: #015e73">
            <span x-text="package.remaining_credits"></span> de <span x-text="package.total_credits"></span> sessões restantes
          </span>
        </div>
      </template>
      <button
        @click="useExistingCredits()"
        class="mt-4 w-full py-3 px-4 bg-[#015e73] text-white font-medium rounded-lg hover:bg-[#014a5a] transition-colors"
      >
        Usar créditos existentes
      </button>
    </div>

    <!-- Dog Information -->
    <div class="mb-8" x-show="booking.dogTrainerPackage">
      <h3 class="font-bold mb-4" style="color: #011e41">Informações sobre o cão</h3>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium mb-2" style="color: #4a5a70">
            Nome do cão <span class="text-red-500">*</span>
          </label>
          <input
            type="text"
            x-model="booking.dogName"
            placeholder="Ex: Max"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#015e73] focus:border-transparent"
            required
          />
        </div>
        
        <div>
          <label class="block text-sm font-medium mb-2" style="color: #4a5a70">
            Raça <span class="text-red-500">*</span>
          </label>
          <input
            type="text"
            x-model="booking.dogBreed"
            placeholder="Ex: Labrador"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#015e73] focus:border-transparent"
            required
          />
        </div>
        
        <div>
          <label class="block text-sm font-medium mb-2" style="color: #4a5a70">
            Idade <span class="text-red-500">*</span>
          </label>
          <select
            x-model="booking.dogAge"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#015e73] focus:border-transparent"
            required
          >
            <option value="">Selecione a idade</option>
            <option value="puppy">Cachorro (< 1 ano)</option>
            <option value="young">Jovem (1-3 anos)</option>
            <option value="adult">Adulto (3-7 anos)</option>
            <option value="senior">Sénior (7+ anos)</option>
          </select>
        </div>
        
        <div>
          <label class="block text-sm font-medium mb-2" style="color: #4a5a70">
            Tamanho <span class="text-red-500">*</span>
          </label>
          <select
            x-model="booking.dogSize"
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#015e73] focus:border-transparent"
            required
          >
            <option value="">Selecione o tamanho</option>
            <option value="small">Pequeno (< 10kg)</option>
            <option value="medium">Médio (10-25kg)</option>
            <option value="large">Grande (25-40kg)</option>
            <option value="xlarge">Muito grande (> 40kg)</option>
          </select>
        </div>
      </div>
      
      <div class="mt-4">
        <label class="block text-sm font-medium mb-2" style="color: #4a5a70">
          Comportamentos a trabalhar (opcional)
        </label>
        <textarea
          x-model="booking.dogBehaviorNotes"
          placeholder="Ex: Puxa muito na coleira, late para outros cães, ansiedade de separação..."
          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#015e73] focus:border-transparent resize-none"
          rows="3"
        ></textarea>
      </div>
    </div>

    <!-- Continue Button -->
    <div x-show="booking.dogTrainerPackage && booking.dogName && booking.dogBreed && booking.dogAge && booking.dogSize">
      <button
        @click="proceedFromDogTrainerPackages()"
        class="w-full py-4 px-6 bg-[#015e73] text-white font-semibold rounded-full hover:bg-[#014a5a] transition-colors duration-200 shadow-lg"
      >
        Continuar para escolher treinador
      </button>
    </div>

    <!-- Back Button -->
    <div class="mt-4 text-center">
      <button
        @click="goToScreen(1)"
        class="text-gray-500 hover:text-gray-700 font-medium"
      >
        ← Voltar
      </button>
    </div>
  </div>
</div>