<!-- Service Area (Map) Tab -->
<div
  x-show="currentTab === 'service-area' && isProviderMode"
  x-transition:enter="transition ease-out duration-300"
  x-transition:enter-start="opacity-0 transform translate-y-4"
  x-transition:enter-end="opacity-100 transform translate-y-0"
  class="space-y-6"
  x-data="{
    mapView: 'coverage',
    serviceAreas: [
      { name: 'Luanda Centro', enabled: true, surcharge: 0, color: '#10b981' },
      { name: 'Maianga', enabled: true, surcharge: 0, color: '#10b981' },
      { name: 'Ingombota', enabled: true, surcharge: 5, color: '#f59e0b' },
      { name: 'Rangel', enabled: true, surcharge: 10, color: '#f59e0b' },
      { name: 'Cazenga', enabled: false, surcharge: 15, color: '#ef4444' },
      { name: 'Viana', enabled: false, surcharge: 20, color: '#ef4444' }
    ],
    maxTravelDistance: 25,
    preferredRadius: 15,
    travelSettings: {
      includeTrafficTime: true,
      avoidTolls: false,
      preferMainRoads: true
    }
  }"
>
  <!-- Map View Toggle -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-lg font-semibold" style="color: #011e41">Service Area Coverage Map</h3>
      <div class="flex bg-gray-100 p-1 rounded-lg">
        <button
          @click="mapView = 'coverage'"
          class="py-2 px-4 text-sm font-medium rounded-md transition-colors"
          :class="mapView === 'coverage' ? 'bg-white shadow-sm' : 'text-gray-500 hover:text-gray-700'"
          :style="mapView === 'coverage' ? 'color: #035d73; cursor: pointer' : 'cursor: pointer'"
        >
          Coverage View
        </button>
        <button
          @click="mapView = 'distance'"
          class="py-2 px-4 text-sm font-medium rounded-md transition-colors"
          :class="mapView === 'distance' ? 'bg-white shadow-sm' : 'text-gray-500 hover:text-gray-700'"
          :style="mapView === 'distance' ? 'color: #035d73; cursor: pointer' : 'cursor: pointer'"
        >
          Distance View
        </button>
      </div>
    </div>
    
    <!-- Map Placeholder -->
    <div class="bg-gray-100 rounded-lg h-96 flex items-center justify-center border-2 border-dashed border-gray-300">
      <div class="text-center">
        <svg class="mx-auto h-16 w-16 text-gray-400 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/>
        </svg>
        <h4 class="text-lg font-medium text-gray-900 mb-2">Interactive Service Area Map</h4>
        <p class="text-gray-600 mb-4">Draw polygons to define your service areas and set distance-based pricing</p>
        <button class="px-4 py-2 text-white rounded-lg text-sm font-medium transition-colors" style="background-color: #035d73; cursor: pointer" onmouseover="this.style.backgroundColor='#024954'" onmouseout="this.style.backgroundColor='#035d73'">
          Launch Map Editor
        </button>
      </div>
    </div>
    
    <!-- Map Legend -->
    <div class="mt-4 flex items-center justify-between">
      <div class="flex items-center space-x-4">
        <div class="flex items-center">
          <div class="w-4 h-4 bg-green-500 rounded mr-2"></div>
          <span class="text-sm text-gray-600">Free zones (R$ 0 surcharge)</span>
        </div>
        <div class="flex items-center">
          <div class="w-4 h-4 bg-yellow-500 rounded mr-2"></div>
          <span class="text-sm text-gray-600">Standard zones (R$ 5-10 surcharge)</span>
        </div>
        <div class="flex items-center">
          <div class="w-4 h-4 bg-red-500 rounded mr-2"></div>
          <span class="text-sm text-gray-600">Extended zones (R$ 15+ surcharge)</span>
        </div>
      </div>
      <button class="text-sm hover:underline" style="color: #035d73; cursor: pointer">Full Screen Map</button>
    </div>
  </div>

  <!-- Service Area Configuration -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
    <h3 class="text-lg font-semibold mb-4" style="color: #011e41">Area Configuration</h3>
    
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <!-- Service Areas List -->
      <div>
        <h4 class="font-medium text-gray-900 mb-3">Service Areas</h4>
        <div class="space-y-3">
          <template x-for="area in serviceAreas" :key="area.name">
            <div 
              class="flex items-center justify-between p-4 border rounded-lg"
              :class="area.enabled ? 'border-green-200 bg-green-50' : 'border-gray-200'"
            >
              <div class="flex items-center">
                <div 
                  class="w-4 h-4 rounded mr-3"
                  :style="'background-color: ' + area.color"
                ></div>
                <div>
                  <div class="font-medium text-gray-900" x-text="area.name"></div>
                  <div class="text-sm text-gray-500" x-show="area.surcharge > 0">
                    +R$ <span x-text="area.surcharge"></span> surcharge
                  </div>
                  <div class="text-sm text-gray-500" x-show="area.surcharge === 0">
                    No surcharge
                  </div>
                </div>
              </div>
              
              <div class="flex items-center space-x-2">
                <button
                  @click="area.enabled = !area.enabled"
                  class="relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2"
                  :class="area.enabled ? 'bg-gray-300' : 'bg-gray-300'"
                  :style="area.enabled ? 'background-color: #035d73; cursor: pointer' : 'cursor: pointer'"
                >
                  <span
                    class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform"
                    :class="area.enabled ? 'translate-x-6' : 'translate-x-1'"
                  ></span>
                </button>
                <button class="text-sm hover:underline" style="color: #035d73; cursor: pointer">Edit</button>
              </div>
            </div>
          </template>
        </div>
        
        <button class="mt-4 w-full py-2 px-4 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 hover:text-gray-700 transition-colors" style="cursor: pointer">
          + Add New Area
        </button>
      </div>
      
      <!-- Distance Settings -->
      <div>
        <h4 class="font-medium text-gray-900 mb-3">Distance Settings</h4>
        
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Maximum Travel Distance
            </label>
            <div class="relative">
              <input 
                type="range" 
                min="5" 
                max="50" 
                step="5"
                x-model="maxTravelDistance"
                class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                style="cursor: pointer"
              >
              <div class="flex justify-between text-xs text-gray-500 mt-1">
                <span>5 km</span>
                <span>50 km</span>
              </div>
            </div>
            <div class="mt-2 text-sm text-gray-600">
              Current: <span x-text="maxTravelDistance"></span> km
            </div>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Preferred Working Radius
            </label>
            <div class="relative">
              <input 
                type="range" 
                min="5" 
                max="30" 
                step="5"
                x-model="preferredRadius"
                class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                style="cursor: pointer"
              >
              <div class="flex justify-between text-xs text-gray-500 mt-1">
                <span>5 km</span>
                <span>30 km</span>
              </div>
            </div>
            <div class="mt-2 text-sm text-gray-600">
              Current: <span x-text="preferredRadius"></span> km
            </div>
          </div>
          
          <div class="pt-4 border-t border-gray-200">
            <h5 class="font-medium text-gray-900 mb-3">Travel Preferences</h5>
            
            <div class="space-y-3">
              <label class="flex items-center">
                <input 
                  type="checkbox" 
                  x-model="travelSettings.includeTrafficTime"
                  class="rounded border-gray-300 focus:ring-2"
                  style="color: #035d73; cursor: pointer"
                  onchange="this.style.accentColor='#035d73'"
                >
                <span class="ml-2 text-sm text-gray-700">Include traffic time in estimates</span>
              </label>
              
              <label class="flex items-center">
                <input 
                  type="checkbox" 
                  x-model="travelSettings.avoidTolls"
                  class="rounded border-gray-300 focus:ring-2"
                  style="color: #035d73; cursor: pointer"
                  onchange="this.style.accentColor='#035d73'"
                >
                <span class="ml-2 text-sm text-gray-700">Avoid toll roads when possible</span>
              </label>
              
              <label class="flex items-center">
                <input 
                  type="checkbox" 
                  x-model="travelSettings.preferMainRoads"
                  class="rounded border-gray-300 focus:ring-2"
                  style="color: #035d73; cursor: pointer"
                  onchange="this.style.accentColor='#035d73'"
                >
                <span class="ml-2 text-sm text-gray-700">Prefer main roads over shortcuts</span>
              </label>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="mt-6 pt-4 border-t border-gray-200">
      <button class="px-4 py-2 text-white rounded-lg text-sm font-medium transition-colors" style="background-color: #035d73" onmouseover="this.style.backgroundColor='#024954'" onmouseout="this.style.backgroundColor='#035d73'">
        Save Area Settings
      </button>
      <button class="ml-2 px-4 py-2 text-white rounded-lg text-sm font-medium transition-colors" style="background-color: #fdea00; color: #000; cursor: pointer" onmouseover="this.style.backgroundColor='#fcd34d'" onmouseout="this.style.backgroundColor='#fdea00'">
        Reset to Defaults
      </button>
    </div>
  </div>

  <!-- Distance-Based Pricing -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
    <h3 class="text-lg font-semibold mb-4" style="color: #011e41">Distance-Based Pricing</h3>
    
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
      <div class="bg-green-50 border border-green-200 rounded-lg p-4">
        <div class="flex items-center">
          <div class="w-4 h-4 bg-green-500 rounded mr-3"></div>
          <div>
            <div class="font-medium text-green-900">0-10 km</div>
            <div class="text-sm text-green-700">No surcharge</div>
          </div>
        </div>
      </div>
      
      <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
        <div class="flex items-center">
          <div class="w-4 h-4 bg-yellow-500 rounded mr-3"></div>
          <div>
            <div class="font-medium text-yellow-900">10-20 km</div>
            <div class="text-sm text-yellow-700">R$ 5-10 surcharge</div>
          </div>
        </div>
      </div>
      
      <div class="bg-red-50 border border-red-200 rounded-lg p-4">
        <div class="flex items-center">
          <div class="w-4 h-4 bg-red-500 rounded mr-3"></div>
          <div>
            <div class="font-medium text-red-900">20+ km</div>
            <div class="text-sm text-red-700">R$ 15+ surcharge</div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="rounded-lg p-4" style="background-color: #e6f7ff; border: 1px solid #035d73">
      <div class="flex items-start">
        <svg class="w-5 h-5 mr-2 mt-0.5" style="color: #035d73" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <div class="text-sm">
          <div class="font-medium" style="color: #035d73">Pricing Guidelines</div>
          <div class="mt-1" style="color: #024954">
            • Distance surcharges help cover travel time and fuel costs<br>
            • Customers see surcharges clearly before booking<br>
            • You can adjust rates for special areas (airports, remote locations)<br>
            • System automatically calculates optimal routing
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Coverage Statistics -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
    <h3 class="text-lg font-semibold mb-4" style="color: #011e41">Coverage Statistics</h3>
    
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
      <div class="text-center p-4 bg-gray-50 rounded-lg">
        <div class="text-2xl font-bold text-gray-900">4</div>
        <div class="text-sm text-gray-600">Active Areas</div>
      </div>
      
      <div class="text-center p-4 bg-gray-50 rounded-lg">
        <div class="text-2xl font-bold text-gray-900">~850k</div>
        <div class="text-sm text-gray-600">Population Covered</div>
      </div>
      
      <div class="text-center p-4 bg-gray-50 rounded-lg">
        <div class="text-2xl font-bold text-gray-900">25 km</div>
        <div class="text-sm text-gray-600">Max Distance</div>
      </div>
      
      <div class="text-center p-4 bg-gray-50 rounded-lg">
        <div class="text-2xl font-bold text-gray-900">R$ 7.50</div>
        <div class="text-sm text-gray-600">Avg. Surcharge</div>
      </div>
    </div>
  </div>

  <!-- Recent Distance Requests -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-lg font-semibold" style="color: #011e41">Recent Distance Requests</h3>
      <button class="text-sm hover:underline" style="color: #035d73; cursor: pointer">View All</button>
    </div>
    
    <div class="space-y-3">
      <div class="flex items-center justify-between p-3 border border-gray-100 rounded-lg">
        <div>
          <div class="font-medium text-gray-900">Maianga → Rangel</div>
          <div class="text-sm text-gray-600">12.3 km • Standard Clean</div>
        </div>
        <div class="text-right">
          <div class="font-medium text-gray-900">+R$ 10.00</div>
          <div class="text-xs text-green-600">Accepted</div>
        </div>
      </div>
      
      <div class="flex items-center justify-between p-3 border border-gray-100 rounded-lg">
        <div>
          <div class="font-medium text-gray-900">Centro → Viana</div>
          <div class="text-sm text-gray-600">28.7 km • Deep Clean</div>
        </div>
        <div class="text-right">
          <div class="font-medium text-gray-900">+R$ 25.00</div>
          <div class="text-xs text-red-600">Declined</div>
        </div>
      </div>
      
      <div class="flex items-center justify-between p-3 border border-gray-100 rounded-lg">
        <div>
          <div class="font-medium text-gray-900">Ingombota → Maianga</div>
          <div class="text-sm text-gray-600">8.1 km • Express Clean</div>
        </div>
        <div class="text-right">
          <div class="font-medium text-gray-900">+R$ 5.00</div>
          <div class="text-xs text-green-600">Completed</div>
        </div>
      </div>
    </div>
  </div>
</div>