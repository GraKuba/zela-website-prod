{% if payment_methods %}
  {% for method in payment_methods %}
    <div
      class="border border-gray-200 rounded-xl p-4 {% if method.is_default %}bg-gradient-to-r from-gray-900 to-gray-800 text-white{% else %}hover:bg-gray-50 transition-colors{% endif %}"
    >
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-3">
          {% if method.kind == 'card' %}
            <svg
              class="h-8 w-8 {% if method.is_default %}text-white{% else %}text-gray-400{% endif %}"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"
              />
            </svg>
          {% elif method.kind == 'paypal' %}
            <svg
              class="h-8 w-8 {% if method.is_default %}text-white{% else %}text-blue-500{% endif %}"
              fill="currentColor"
              viewBox="0 0 24 24"
            >
              <path d="M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944 3.419c.037-.325.327-.569.656-.569h6.974c2.234 0 3.889.424 4.922 1.26.522.423.875.935 1.049 1.522.174.587.192 1.282.055 2.066-.138.787-.396 1.484-.766 2.073-.371.589-.875 1.1-1.499 1.519-.624.419-1.387.738-2.268.949-.882.21-1.911.316-3.059.316H8.83L7.076 21.337zm2.47-9.293h1.962c.676 0 1.267-.078 1.756-.232.49-.154.845-.395 1.056-.716.21-.321.332-.728.361-1.209.029-.48-.063-.848-.273-1.092-.21-.244-.585-.367-1.114-.367H10.68l-.906 3.616h1.772zm9.792 9.23H14.73a.64.64 0 0 1-.633-.738l2.157-13.004c.037-.327.327-.571.656-.571h4.636c1.337 0 2.35.2 3.01.596.66.395 1.025 1.097.916 2.082-.109.985-.519 1.773-1.217 2.342-.699.569-1.691.853-2.949.853h-2.157l-.82 8.44zm2.268-10.654h1.444c.656 0 1.141-.111 1.444-.331.303-.22.492-.541.563-.952.071-.411-.016-.728-.259-.94-.243-.213-.674-.319-1.281-.319h-1.354l-.557 2.542z"/>
            </svg>
          {% elif method.kind == 'apple' %}
            <svg
              class="h-8 w-8 {% if method.is_default %}text-white{% else %}text-gray-800{% endif %}"
              fill="currentColor"
              viewBox="0 0 24 24"
            >
              <path d="M17.05 20.28c-.98.95-2.05.88-3.08.42-1.09-.46-2.08-.48-3.24 0-1.45.62-2.21.44-3.06-.42C2.8 15.61 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.13 1.87-2.4 5.98.48 7.13-.57 1.5-1.31 2.99-2.53 4.09zM11.94 7.19c-.16-2.26 1.68-4.11 3.94-4.39.29 2.66-2.5 4.65-3.94 4.39z"/>
            </svg>
          {% endif %}
          <div>
            <div class="font-semibold {% if not method.is_default %}text-gray-900{% endif %}">
              {{ method.display_name }}
            </div>
            {% if method.kind == 'card' and method.expiry_month and method.expiry_year %}
              <div class="text-sm {% if method.is_default %}text-gray-300{% else %}text-gray-500{% endif %}">
                Expires {{ method.expiry_month|stringformat:"02d" }}/{{ method.expiry_year|slice:"-2:" }}
                {% if method.is_expired %}
                  <span class="text-red-500 font-medium">(Expired)</span>
                {% endif %}
              </div>
            {% endif %}
          </div>
        </div>
        <div class="flex items-center space-x-2">
          {% if method.is_default %}
            <span
              class="px-2 py-1 text-xs font-medium rounded-full"
              style="background-color: #fdea00; color: #035d73"
              >Primary</span
            >
          {% else %}
            <button
              class="px-3 py-1 bg-gray-100 text-gray-700 rounded-lg text-sm hover:bg-gray-200 transition-colors cursor-pointer"
              hx-post="{% url 'website:set-default-payment' method.id %}"
              hx-swap="outerHTML"
              hx-target="#payment-methods-container"
            >
              Set Primary
            </button>
          {% endif %}
          <button
            class="p-2 {% if method.is_default %}hover:bg-gray-700{% else %}hover:bg-gray-100{% endif %} rounded-lg transition-colors cursor-pointer"
          >
            <svg
              class="h-4 w-4 {% if method.is_default %}text-white{% else %}text-gray-400{% endif %}"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"
              />
            </svg>
          </button>
        </div>
      </div>
    </div>
  {% endfor %}
{% else %}
  <div class="text-center py-8 text-gray-500">
    <svg
      class="mx-auto h-12 w-12 text-gray-400 mb-4"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"
      />
    </svg>
    <p class="mb-4">No payment methods added yet</p>
    <button
      class="px-4 py-2 text-white rounded-lg text-sm font-medium hover:opacity-90 transition-colors"
      style="background-color: #035d73"
      hx-get="{% url 'website:add-payment-method' %}"
      hx-target="body"
      hx-swap="beforeend"
    >
      Add Your First Card
    </button>
  </div>
{% endif %}