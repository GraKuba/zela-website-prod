<!-- Inline Edit Form - Improved UX -->
<form
  hx-post="{% url 'accounts:location-edit' location.id %}"
  hx-target="#addresses-tab"
  hx-swap="innerHTML"
  hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
  class="bg-white rounded-lg border border-gray-200 p-4 mt-4 shadow-sm"
  @submit.prevent
>
  {% csrf_token %}
  
  <div class="space-y-4">
    <!-- Location Name -->
    <div>
      <label for="edit_name_{{ location.id }}" class="block text-sm font-medium text-gray-700 mb-1">
        Location Name
      </label>
      <input
        type="text"
        name="name"
        id="edit_name_{{ location.id }}"
        value="{{ location.name }}"
        required
        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#015e73] focus:border-transparent text-sm"
        placeholder="e.g., Home, Office"
      >
    </div>

    <!-- Address Lines -->
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
      <div class="sm:col-span-2">
        <label for="edit_address_line_1_{{ location.id }}" class="block text-sm font-medium text-gray-700 mb-1">
          Street Address
        </label>
        <input
          type="text"
          name="address_line_1"
          id="edit_address_line_1_{{ location.id }}"
          value="{{ location.address_line_1 }}"
          required
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#015e73] focus:border-transparent text-sm"
          placeholder="Street address"
        >
      </div>

      <div class="sm:col-span-2">
        <label for="edit_address_line_2_{{ location.id }}" class="block text-sm font-medium text-gray-700 mb-1">
          Apartment, Suite, etc. <span class="text-gray-400 text-xs">(optional)</span>
        </label>
        <input
          type="text"
          name="address_line_2"
          id="edit_address_line_2_{{ location.id }}"
          value="{{ location.address_line_2|default:'' }}"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#015e73] focus:border-transparent text-sm"
          placeholder="Apt, Suite, Unit, etc."
        >
      </div>
    </div>

    <!-- City, Province, Postal -->
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
      <div>
        <label for="edit_city_{{ location.id }}" class="block text-sm font-medium text-gray-700 mb-1">
          City
        </label>
        <input
          type="text"
          name="city"
          id="edit_city_{{ location.id }}"
          value="{{ location.city }}"
          required
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#015e73] focus:border-transparent text-sm"
          placeholder="City"
        >
      </div>

      <div>
        <label for="edit_province_{{ location.id }}" class="block text-sm font-medium text-gray-700 mb-1">
          Province
        </label>
        <input
          type="text"
          name="province"
          id="edit_province_{{ location.id }}"
          value="{{ location.province }}"
          required
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#015e73] focus:border-transparent text-sm"
          placeholder="Province/State"
        >
      </div>

      <div>
        <label for="edit_postal_code_{{ location.id }}" class="block text-sm font-medium text-gray-700 mb-1">
          Postal Code
        </label>
        <input
          type="text"
          name="postal_code"
          id="edit_postal_code_{{ location.id }}"
          value="{{ location.postal_code|default:'' }}"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#015e73] focus:border-transparent text-sm"
          placeholder="12345"
        >
      </div>
    </div>

    <!-- Country -->
    <div>
      <label for="edit_country_{{ location.id }}" class="block text-sm font-medium text-gray-700 mb-1">
        Country
      </label>
      <select
        name="country"
        id="edit_country_{{ location.id }}"
        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#015e73] focus:border-transparent text-sm cursor-pointer"
      >
        <option value="AO" {% if location.country == 'AO' %}selected{% endif %}>ðŸ‡¦ðŸ‡´ Angola</option>
        <option value="BR" {% if location.country == 'BR' %}selected{% endif %}>ðŸ‡§ðŸ‡· Brazil</option>
        <option value="PT" {% if location.country == 'PT' %}selected{% endif %}>ðŸ‡µðŸ‡¹ Portugal</option>
        <option value="US" {% if location.country == 'US' %}selected{% endif %}>ðŸ‡ºðŸ‡¸ United States</option>
        <option value="GB" {% if location.country == 'GB' %}selected{% endif %}>ðŸ‡¬ðŸ‡§ United Kingdom</option>
      </select>
    </div>

    <!-- Set as Main Location -->
    {% if not location.is_main %}
    <div class="bg-gray-50 rounded-lg p-3 cursor-pointer">
      <label class="flex items-center cursor-pointer">
        <input
          type="checkbox"
          name="is_main"
          id="edit_is_main_{{ location.id }}"
          class="h-4 w-4 text-[#015e73] focus:ring-[#015e73] border-gray-300 rounded"
        >
        <span class="ml-2 text-sm text-gray-700">Set as main location</span>
      </label>
    </div>
    {% endif %}
  </div>

  <!-- Form Actions -->
  <div class="flex gap-2 pt-4 mt-4 border-t border-gray-100">
    <button
      type="submit"
      class="px-4 py-2 bg-[#015e73] text-white text-sm font-medium rounded-lg hover:bg-[#014a5a] focus:ring-4 focus:ring-[#015e73]/20 transition-all duration-200 cursor-pointer"
    >
      <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
      </svg>
      Save Changes
    </button>
    <button
      type="button"
      @click="editingLocation = null"
      class="px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-200 transition-colors cursor-pointer"
    >
      Cancel
    </button>
  </div>
</form>